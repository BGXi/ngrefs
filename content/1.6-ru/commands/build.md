# `ng build`

> Это главная команда, которую вы используете перед тем, как опубликовать ваше приложение. Файлы сгенерированные в папку `dist` можно будет залить на сервер и открыть в браузере.

```
ng build
ng b
```

Билд приложения.

## `--target`

* Тип: `String` 
* Псевдонимы: `-t`, `--dev` / `--target=development`, `--prod` / `--target=production`.
* Значения: `development`, `production` 

Важно понимать, что это мета-параметры и предустанавливают другие параметры.

### `build --dev`

Для локальных или непубличных билдов.

Выставляет параметры:

```
--environment=dev --output-hashing=media --sourcemaps --named-chunks
```

### `build --prod`

Публичный билд вашего приложения.

Выставляет параметры:
 
```
--aot --environment=prod --output-hashing=all --extract-css --extract-licenses --build-optimizer --service-worker
```

Кроме этого:

* запускает UglifyJS для кода.


## `--environment`

* Тип: `String`
* Псевдонимы: `-e` 

> Для различных окружений вы можете передавать разные параметры во внутрь приложения. Например, url к бекенду.

Настройки конфига окружения вы можете найти в файле `.angular-cli.json` по ключам в `environments` для текущей аппы.


## `--output-path`

* Тип: `Path`
* Псевдонимы: `-op`

> Вы можете поменять папку, в которую будут сгенерированы все файлы.

По-умолчанию папка для генерации:`./dist`. 


## `--aot`

* Тип: `Path`
* Псевдонимы: `-op`
* По-умолчанию: `false`

> AOT-компиляция позволяет сократить обьем кода и ускорить рендеринг, полезна для продакшен билдов.


## `--sourcemaps`

* Тип: `Boolean`
* Псевдонимы: `-sm`, `--sourcemap`
* .angular-cli.json: `defaults.build.sourcemaps`

> [Sourcemaps нужны](https://habrahabr.ru/post/148098/) для быстрого поиска ошибок и навигации по исходному коду через браузер.


## `--vendor-chunk`

* Тип: `Boolean`
* Псевдонимы: `-vc`
* По-умолчанию: `true`

Генерация отдельного бандла (файла) для всего вендор-кода.


## `--common-chunk`

* Тип: `Boolean`
* Псевдонимы: `-cc`
* По-умолчанию: `true`

Генерация отдельного бандла (файла) для кода, который используется в нескольких модулях.


## `--base-href`

* Тип: `String`
* Псевдонимы: `-bh`
* .angular-cli.json: `defaults.build.baseHref`

> Необходимо, если ваше приложение загружается не в корне сайта.

Указание ссылки к приложению для корректной генерации путей к файлам и работы роутера.

Если ваше приложение должно распологаться по адресу `site.com/my/app`, то параметр будет таким: `--base-href=/my/app/`. 

 
## `--deploy-url`

* Тип: `String`
* Псевдонимы: `-d`

> Основной кейс: использование CDN, когда домен ресурсов отличается от того, на котором развернуто приложение.

Явное указание URL для подключаемых ресурсов.


## `--verbose`

* Тип: `Boolean`
* Псевдонимы: `-v`
* По-умолчанию: `false`

> Если во время билда возникают ошибки и вы хотите получить больше информации.

Вывод более детальной информации.


## `--progress`

* Тип: `Boolean`
* Псевдонимы: `-pr`
* По-умолчанию: `true`
* .angular-cli.json: `defaults.build.progress`

> Возможность скрыть прогресс билда, например, чтобы не засорять лог CI.


## `--i18n-file`

* Тип: `String`

> Команда необходимая, если у вас мультиязычное приложение. 

Путь к i18n файлу.


## `--i18n-format`

Аналогично с [`ng xi18n --i18n-format`](../command-ng-xi18n#--i18n-format)


## `--locale`

Аналогично с [`ng xi18n --locale`](../command-ng-xi18n#--locale)


## `--missing-translation`

* Тип: `String`
* Значения: `error`, `warning`, `ignore`
* По-умолчанию: `error`

> Не редки случаи, когда при измении шаблонов, забывают обновить файлы перевода и приложение перестает работать. С помощью этого параметра можно поменять это поведение.

Способ обработки случаев отсутсвия перевода для строки.


## `--extract-css`

* Тип: `Boolean`
* Псевдонимы: `-ec`
* По-умолчанию: `false`

> Иногда есть необходимость в хранении .css вне бандла.

Генерирование css в отдельные .css-файлы, а не в общий js-бандл.


## `--watch`

* Тип: `Boolean`
* Псевдонимы: `w`
* По-умолчанию: `false`

Слежение за изменениями файлов и автоматическим запуском билда.


## `--output-hashing`

* Тип: `String`
* Псевдонимы: `-oh`
* Значения: `none`, `all`, `media`, `bundles`

> Использется, чтобы кеширование (на cdn или в браузере клиента) не нарушало работоспособность вашего приложения.

Добавление хеша к имени файлов.


## `--poll`

* Тип: `Number`
* .angular-cli.json: `defaults.build.poll`

> Если у вас слабая машина, то вы можете выставить этот параметр, чтобы снизить нагрузку.

Интервал проверки изменений в файлах для `--watch` режима.


## `--app`

* Тип: `String`
* Псевдонимы: `-a`

> В `.angular-cli.json` вы можете добавить несколько конфигураций в раздел `apps`, билд запускается только для одной из них. 

Индекс приложения для билда.

Есть 2 варианта, как указать на конкретное приложение, через индекс в массиве `apps` или добавить поле `name`:

```json
...
"apps": [
  ...
  {
    "name": "server",
    ...
```

И использовать его:

```
--app=server
```


## `--delete-output-path`

* Тип: `Boolean`
* Псевдонимы: `-dop`
* По-умолчанию: `true`
* .angular-cli.json: `defaults.build.deleteOutputPath`

> Вы можете отключить удаление папки ./dist, например, если перед билдом туда добавляются другие файлы.

Удаление папки, в которую будет сгенерирован код.


## `--preserve-symlinks`

* Тип: `Boolean`
* .angular-cli.json: `defaults.build.preserveSymlinks`

>>> Буду благодарен за информацию по этому параметру

Do not use the real path when resolving modules.


## `--extract-licenses`

* Тип: `Boolean`
* По-умолчанию: `true`

Сбор всех лицензий из исходных файлов в файл `3rdpartylicenses.txt`. 

Работает только для `--prod`.


## `--show-circular-dependencies`

* Тип: `Boolean`
* Псевдонимы: `-scd`
* По-умолчанию: `true`
* .angular-cli.json: `defaults.build.showCircularDependencies`

Вывод предупреждения о циклической DI-зависимости.


## `--build-optimizer`

* Тип: `Boolean`
* По-умолчанию: `false`

Включение @angular-devkit/build-optimizer для `--aot`.


## `--named-chunks`

* Тип: `Boolean`
* Псевдонимы: `-nc`
* По-умолчанию: `true`
* .angular-cli.json: `defaults.build.namedChunks`

> По-умолчанию для `prod` билда файлы с вашими модулями пронумерованы, а не используют свое имя.

Использование имени модуля для имени файлов, которые загружаются через LazyLoading.

Для prod-билда значение выставлено `false`, но его можно поменять.


## `--subresource-integrity`

* Тип: `Boolean`
* Псевдонимы: `-sri`
* По-умолчанию: `false`

> Позволяет повысить безопасность вашего приложения.

Включение [subresource integrity](https://www.maxcdn.com/one/visual-glossary/subresource-integrity/).


## `--stats-json`

* Тип: `Boolean`
* По-умолчанию: `false`

> При росте приложения разростается и бандл, особенно вендоры. Полезно узнать что именно попало в билд и какой обьем занимает.

Генерирует файл статистики `stats.json`, который используется при анализе бандла с помощью `webpack-bundle-analyzer` или https://webpack.github.io/analyse. 


## `--bundle-dependencies`

* Тип: `none`, `all`
* По-умолчанию: `none`

Доступно только для `platform-server`. Добавление всех зависимостей в бандл. По-умолчанию все зависимости из `node_modules` запрашиваются через `require`.


## `--service-worker`

* Тип: `Boolean`
* Псевдонимы: `-sw`
* По-умолчанию: `true`

Добавляет service worker, если такая настройка есть в `.angular-cli.json`.


## `--skip-app-shell`

* Тип: `Boolean`
* По-умолчанию: `false`

>>> Flag to prevent building an app shell
